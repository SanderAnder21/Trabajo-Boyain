<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subir Proyecto - PortArq</title>
    <link rel="stylesheet" href="../CSS/index.css">
    <link rel="stylesheet" href="../CSS/Estilos.css">
    <link rel="stylesheet" href="../CSS/AdministrarCuenta.css">
</head>

<body>
    <div class="contenedor-imagen">
        <img src="../IMG/arq8.jpg" alt="imagen inicio">
        <nav1>
            <ul>
                <li><a href="../INDEX.html" class="logo">PortArq</a></li>
            </ul>
        </nav1>
        <nav>
            <ul>
                <li><a href="Proyectos.html">Explorar Proyectos</a></li>
                <li><a href="MisProyectos.html">Mis Proyectos</a></li>
                <li class="dropdown">
                    <a href="#" id="userIcon" class="icon-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                    </a>

                    <div id="dropdownMenu" class="dropdown-content">
                        <a href="CrearCuenta.html">Iniciar Sesion</a>
                        <a href="AdministrarCuenta.html">Mi Cuenta</a>
                        <a href="SubirProyecto.html">Administrar Proyectos</a>
                    </div>
                </li>
                </li>
            </ul>
        </nav>
    </div>

    <div class="admin-container">
        <div class="admin-header">
            <h1>Administrar Proyectos</h1>
            <p>Gestiona tus proyectos</p>
        </div>

        <div class="admin-content">
            <div class="projects-section">
                <h2>Subir Nuevo Proyecto</h2>
                <form id="projectForm" class="project-form" enctype="multipart/form-data">
                    <div class="form-group">
                        <label for="projectName">Nombre del Proyecto *</label>
                        <input type="text" id="projectName" name="projectName" required>
                    </div>

                    <div class="form-group">
                        <label for="projectDescription">Descripci√≥n General del Proyecto *</label>
                        <textarea id="projectDescription" name="projectDescription" rows="4" required
                            placeholder="Describe tu proyecto..."></textarea>
                        <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div class="form-group">
                                <label for="projectLocation">Ubicaci√≥n</label>
                                <input type="text" id="projectLocation" name="projectLocation"
                                    placeholder="Ej: Santa Fe, Ciudad de M√©xico">
                            </div>
                            <div class="form-group">
                                <label for="projectType">Tipo de Proyecto</label>
                                <select id="projectType" name="projectType" class="form-group">
                                    <option value="">Selecciona un tipo</option>
                                    <option value="residencial">Residencial</option>
                                    <option value="comercial">Comercial</option>
                                    <option value="restauracion">Restauraci√≥n</option>
                                    <option value="industrial">Industrial</option>
                                    <option value="otro">Otro</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px;">
                            <div class="form-group">
                                <label for="projectArea">√Årea Construida</label>
                                <input type="text" id="projectArea" name="projectArea" placeholder="Ej: 320 m¬≤">
                            </div>
                            <div class="form-group">
                                <label for="projectBudget">Presupuesto</label>
                                <input type="text" id="projectBudget" name="projectBudget"
                                    placeholder="Ej: $450,000 USD">
                            </div>
                            <div class="form-group">
                                <label for="projectDuration">Duraci√≥n</label>
                                <input type="text" id="projectDuration" name="projectDuration"
                                    placeholder="Ej: 18 meses">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="projectDescription">Descripci√≥n Breve (para la tarjeta) *</label>
                            <textarea id="projectDescription" name="projectDescription" rows="3" required
                                placeholder="Describe tu proyecto en 1-2 l√≠neas..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="projectFullDescription">Descripci√≥n Completa (con detalles) *</label>
                            <textarea id="projectFullDescription" name="projectFullDescription" rows="8" required
                                placeholder="Describe a fondo tu proyecto. Puedes usar Markdown simple (ej. ## T√≠tulo)"></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Etiquetas del Proyecto * (M√≠nimo 1 de 4)</label>
                        <div class="tags-container">
                            <label class="tag-checkbox">
                                <input type="checkbox" name="tags" value="plano2d">
                                <span>Plano 2D</span>
                            </label>
                            <label class="tag-checkbox">
                                <input type="checkbox" name="tags" value="modelo3d">
                                <span>Modelo 3D</span>
                            </label>
                            <label class="tag-checkbox">
                                <input type="checkbox" name="tags" value="proyectoConstruido">
                                <span>Proyecto Construido</span>
                            </label>
                            <label class="tag-checkbox">
                                <input type="checkbox" name="tags" value="maqueta">
                                <span>Maqueta</span>
                            </label>
                        </div>
                        <small class="tag-count">Seleccionados: <span id="tagCount">0</span>/4</small>
                        <div class="styles-section">
                            <h2>Estilo Arquitect√≥nico</h2>
                            <p>Selecciona los estilos que mejor describan tu proyecto (M√°ximo 3)</p>

                            <div class="styles-container">
                                <label class="style-checkbox">
                                    <input type="checkbox" name="styles" value="minimalista">
                                    <div class="style-icon">üè¢</div>
                                    <span class="style-name">Minimalista</span>
                                </label>

                                <label class="style-checkbox">
                                    <input type="checkbox" name="styles" value="moderno">
                                    <div class="style-icon">üèõÔ∏è</div>
                                    <span class="style-name">Moderno</span>
                                </label>

                                <label class="style-checkbox">
                                    <input type="checkbox" name="styles" value="contemporaneo">
                                    <div class="style-icon">üèòÔ∏è</div>
                                    <span class="style-name">Contempor√°neo</span>
                                </label>

                                <label class="style-checkbox">
                                    <input type="checkbox" name="styles" value="gotico">
                                    <div class="style-icon">‚õ™</div>
                                    <span class="style-name">G√≥tico</span>
                                </label>

                                <label class="style-checkbox">
                                    <input type="checkbox" name="styles" value="colonial">
                                    <div class="style-icon">üè†</div>
                                    <span class="style-name">Colonial</span>
                                </label>

                                <label class="style-checkbox">
                                    <input type="checkbox" name="styles" value="rustico">
                                    <div class="style-icon">üõñ</div>
                                    <span class="style-name">R√∫stico</span>
                                </label>

                                <label class="style-checkbox">
                                    <input type="checkbox" name="styles" value="industrial">
                                    <div class="style-icon">üè≠</div>
                                    <span class="style-name">Industrial</span>
                                </label>

                                <label class="style-checkbox">
                                    <input type="checkbox" name="styles" value="sostenible">
                                    <div class="style-icon">üåø</div>
                                    <span class="style-name">Sostenible</span>
                                </label>
                            </div>

                            <div class="tags-summary">
                                <div class="tag-group">
                                    <h4>Estilos</h4>
                                    <div class="tag-count" id="styleCount">0/3</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Imagen de Portada * (La imagen principal)</label>
                        <p style="font-size: 0.9rem; color: #666; margin-top: -5px;">Esta ser√° la imagen que se muestre
                            en la galer√≠a.</p>
                        <input type="file" id="projectCoverImage" name="projectCoverImage" accept="image/*" required>
                    </div>

                    <div class="form-group">
                        <label>Im√°genes de la Galer√≠a (Selecciona varias)</label>
                        <p style="font-size: 0.9rem; color: #666; margin-top: -5px;">Im√°genes adicionales que se ver√°n
                            en la p√°gina de detalle.</p>
                        <input type="file" id="projectGalleryImages" name="projectGalleryImages" accept="image/*"
                            multiple>
                    </div>

                    <div class="form-group">
                        <label>Planos PDF (Selecciona varios)</label>
                        <input type="file" id="projectPDFs" name="projectPDFs" accept=".pdf" multiple>
                    </div>

                    <div class="form-group">
                        <label>Modelo 3D (Opcional, .obj, .fbx, etc.)</label>
                        <input type="file" id="projectModel3D" name="projectModel3D" accept=".obj,.fbx,.gltf,.glb,.skp">
                    </div>
                    <button type="submit" class="btn-submit">Subir Proyecto</button>
                </form>
            </div>
            <div class="existing-projects">
                <h2>Mis Proyectos</h2>
                <div id="projectsList" class="projects-list">
                    <div class="no-projects">
                        <p>No hay proyectos subidos a√∫n.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="burbuja-flotante">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
        </svg>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-section about">
                <h3 class="logo-text">PortArq</h3>
                <p>
                    Una plataforma especializada para exposici√≥n, organizaci√≥n y gesti√≥n de proyectos para arquitectos.
                </p>
            </div>
            <div class="footer-section links">
                <h3>Enlaces R√°pidos</h3>
                <ul>
                    <li><a href="../INDEX.html">Inicio</a></li>
                    <li><a href="Proyectos.html">Proyectos</a></li>
                    <li><a href="SobreNosotros.html">Nuestra Empresa</a></li>
                    <li><a href="Contactanos.html">Cont√°ctanos</a></li>
                </ul>
            </div>
            <div class="footer-section social">
                <h3>S√≠guenos</h3>
                <a href="#">Instagram</a>
                <a href="#">Facebook</a>
                <a href="#">X</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 PortArq. Todos los derechos reservados.</p>
            <p>Dise√±ado y desarrollado por DevPME</p>
        </div>
    </footer>

    <script src="../JS/AdministrarCuentas.js"></script>
    <script src="../JS/AdministrarProyectos.js"></script>
    <script src="../JS/chatbot.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const projectForm = document.getElementById('projectForm');
            const projectsList = document.getElementById('projectsList');

            projectForm.addEventListener('submit', function (e) {
                e.preventDefault();

                // Obtener datos del formulario
                const projectData = {
                    id: Date.now(), // ID √∫nico basado en timestamp
                    title: document.getElementById('projectName').value,
                    description: document.getElementById('projectDescription').value,
                    technicalTags: Array.from(document.querySelectorAll('input[name="tags"]:checked')).map(tag => tag.value),
                    architecturalStyles: Array.from(document.querySelectorAll('input[name="styles"]:checked')).map(style => style.value),
                    date: new Date().toLocaleDateString('es-ES'),
                    status: 'activo'
                };

                // Validaciones b√°sicas
                if (projectData.technicalTags.length === 0) {
                    alert('Por favor selecciona al menos una etiqueta t√©cnica.');
                    return;
                }

                if (projectData.architecturalStyles.length === 0) {
                    alert('Por favor selecciona al menos un estilo arquitect√≥nico.');
                    return;
                }

                // Guardar en localStorage (temporal)
                saveProject(projectData);

                // Agregar a la lista de proyectos
                addProjectToList(projectData);

                // Limpiar formulario
                projectForm.reset();
                resetTagCounters();

                alert('¬°Proyecto subido correctamente!');
            });

            function saveProject(project) {
                // Guardar en localStorage temporalmente
                let projects = JSON.parse(localStorage.getItem('userProjects') || '[]');
                projects.push(project);
                localStorage.setItem('userProjects', JSON.stringify(projects));
            }

            function addProjectToList(project) {
                const noProjects = projectsList.querySelector('.no-projects');
                if (noProjects) {
                    noProjects.remove();
                }

                const projectCard = document.createElement('div');
                projectCard.className = 'project-card';
                projectCard.innerHTML = `
            <h3>${project.title}</h3>
            <div class="project-meta">
                <small>Subido: ${project.date}</small>
                <small>Estado: ${project.status}</small>
            </div>
            <div class="project-tags">
                ${project.technicalTags.map(tag => `<span class="project-tag technical-tag">${getTagLabel(tag)}</span>`).join('')}
                ${project.architecturalStyles.map(style => `<span class="project-tag style-tag">${getStyleLabel(style)}</span>`).join('')}
            </div>
            <p class="project-description">${project.description}</p>
            <div class="project-actions">
                <button class="btn-editar" onclick="editProject(${project.id})">Editar</button>
                <button class="btn-eliminar" onclick="deleteProject(${project.id})">Eliminar</button>
            </div>
        `;

                projectsList.appendChild(projectCard);
            }

            function getTagLabel(tagValue) {
                const labels = {
                    'plano2d': 'Plano 2D',
                    'modelo3d': 'Modelo 3D',
                    'proyectoConstruido': 'Proyecto Construido',
                    'maqueta': 'Maqueta'
                };
                return labels[tagValue] || tagValue;
            }

            function getStyleLabel(styleValue) {
                const styles = {
                    'minimalista': 'Minimalista',
                    'moderno': 'Moderno',
                    'contemporaneo': 'Contempor√°neo',
                    'gotico': 'G√≥tico',
                    'colonial': 'Colonial',
                    'rustico': 'R√∫stico',
                    'industrial': 'Industrial',
                    'sostenible': 'Sostenible'
                };
                return styles[styleValue] || styleValue;
            }

            function resetTagCounters() {
                document.getElementById('tagCount').textContent = '0';
                document.getElementById('styleTagCount').textContent = '0/3';
            }

            // Cargar proyectos existentes al cargar la p√°gina
            loadExistingProjects();

            function loadExistingProjects() {
                const projects = JSON.parse(localStorage.getItem('userProjects') || '[]');
                projects.forEach(project => addProjectToList(project));
            }
        });

        // Funciones globales para los botones
        function editProject(projectId) {
            alert(`Editar proyecto ${projectId} - Esta funci√≥n estar√° disponible pronto`);
        }

        function deleteProject(projectId) {
            if (confirm('¬øEst√°s seguro de que quieres eliminar este proyecto?')) {
                // Eliminar de localStorage
                let projects = JSON.parse(localStorage.getItem('userProjects') || '[]');
                projects = projects.filter(p => p.id !== projectId);
                localStorage.setItem('userProjects', JSON.stringify(projects));

                // Recargar la lista
                document.getElementById('projectsList').innerHTML = '';
                if (projects.length === 0) {
                    document.getElementById('projectsList').innerHTML = `
                <div class="no-projects">
                    <p>No hay proyectos subidos a√∫n.</p>
                </div>
            `;
                } else {
                    projects.forEach(project => addProjectToList(project));
                }
            }
        }
    </script>
</body>

</html>